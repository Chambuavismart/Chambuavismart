"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[661],{9042:(M,p,l)=>{l.r(p),l.d(p,{AnalysisPdfsComponent:()=>w});var h=l(467),e=l(4438),c=l(177),m=l(1626);const f=(r,d,t)=>({background:r,borderColor:d,color:t});function u(r,d){1&r&&e.nrm(0,"div",17)}function _(r,d){if(1&r&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.error)}}function b(r,d){1&r&&(e.j41(0,"div",19),e.EFF(1,"No PDFs archived yet. Generate an analysis PDF to see it here."),e.k0s())}function x(r,d){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td",26)(2,"input",22),e.bIt("change",function(o){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleOne(i.id,o))}),e.k0s()(),e.j41(3,"td",27),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td")(7,"div",28)(8,"span",29),e.EFF(9),e.k0s(),e.j41(10,"span",30),e.EFF(11,"vs"),e.k0s(),e.j41(12,"span",29),e.EFF(13),e.k0s()()(),e.j41(14,"td",31),e.EFF(15),e.k0s(),e.j41(16,"td",32),e.EFF(17),e.k0s(),e.j41(18,"td")(19,"div",33)(20,"a",34),e.qSk(),e.j41(21,"svg",35),e.nrm(22,"path",36)(23,"path",37)(24,"path",38),e.k0s(),e.EFF(25," View "),e.k0s(),e.joV(),e.j41(26,"a",39),e.qSk(),e.j41(27,"svg",35),e.nrm(28,"path",40)(29,"path",41)(30,"path",42),e.k0s(),e.EFF(31," Download "),e.k0s()()()()}if(2&r){const t=d.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("checked",n.isSelected(t.id)),e.R7$(2),e.JRh(e.i5U(5,11,n.toSafeDate(t.generatedAt),"yyyy-MM-dd HH:mm:ss")),e.R7$(4),e.Y8G("ngStyle",e.sMw(14,f,n.tint(n.colorFor(t.homeTeam),.12),n.tint(n.colorFor(t.homeTeam),.3),n.colorForText(t.homeTeam))),e.R7$(),e.JRh(t.homeTeam),e.R7$(3),e.Y8G("ngStyle",e.sMw(18,f,n.tint(n.colorFor(t.awayTeam),.12),n.tint(n.colorFor(t.awayTeam),.3),n.colorForText(t.awayTeam))),e.R7$(),e.JRh(t.awayTeam),e.R7$(),e.Y8G("title",t.filename),e.R7$(),e.JRh(t.filename),e.R7$(2),e.JRh(n.formatBytes(t.sizeBytes)),e.R7$(3),e.Y8G("href",n.api("/api/matches/analysis-pdfs/"+t.id+"/inline"),e.B4B),e.R7$(6),e.Y8G("href",n.api("/api/matches/analysis-pdfs/"+t.id),e.B4B)}}function k(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",20)(1,"table")(2,"thead")(3,"tr")(4,"th",21)(5,"input",22),e.bIt("change",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleAll(o))}),e.k0s()(),e.j41(6,"th",23),e.EFF(7,"When"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Fixture"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Filename"),e.k0s(),e.j41(12,"th",24),e.EFF(13,"Size"),e.k0s(),e.j41(14,"th",23),e.EFF(15,"Actions"),e.k0s()()(),e.j41(16,"tbody"),e.DNE(17,x,32,22,"tr",25),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(5),e.Y8G("checked",t.allSelected()),e.R7$(12),e.Y8G("ngForOf",t.items)}}let w=(()=>{class r{constructor(){this.http=(0,e.WQX)(m.Qq),this.items=[],this.loading=!1,this.error="",this.selectedIds=new Set,this.merging=!1,this.teamColorMap={liverpool:"#C8102E",everton:"#003399","crystal palace":"#1B458F",brighton:"#0057B8",tottenham:"#132257"}}toSafeDate(t){if(!t)return null;try{const n=new Date(t);return isNaN(n.getTime())?null:n}catch{return null}}ngOnInit(){this.load()}load(){this.loading=!0,this.error="",this.http.get(this.api("/api/matches/analysis-pdfs?page=0&size=50")).subscribe({next:t=>{this.items=Array.isArray(t?.content)?t.content:[],this.loading=!1,this.selectedIds.clear()},error:t=>{this.loading=!1,this.error=t?.error?.message||"Failed to load PDF archives."}})}isSelected(t){return this.selectedIds.has(t)}allSelected(){return this.items.length>0&&this.items.every(t=>this.selectedIds.has(t.id))}toggleOne(t,n){n?.target?.checked?this.selectedIds.add(t):this.selectedIds.delete(t)}toggleAll(t){const n=!!t?.target?.checked;if(this.selectedIds.clear(),n)for(const o of this.items)null!=o?.id&&this.selectedIds.add(o.id)}downloadSelected(){var t=this;return(0,h.A)(function*(){if(0===t.selectedIds.size)return;const n=Array.from(t.selectedIds);yield t.mergeAndDownload(n)})()}downloadAllOnPage(){var t=this;return(0,h.A)(function*(){if(!t.items.length)return;const n=t.items.map(o=>o.id);yield t.mergeAndDownload(n)})()}mergeAndDownload(t){this.merging=!0,this.error="";const n=this.api("/api/matches/analysis-pdfs/merge");return new Promise(o=>{this.http.post(n,{ids:t},{responseType:"blob"}).subscribe({next:i=>{this.merging=!1,this.triggerDownload(i),o()},error:i=>{this.merging=!1,this.error=i?.error?.text||"Failed to merge and download PDFs.",o()}})})}triggerDownload(t){const n=new Date,o=g=>(g<10?"0":"")+g,i=`Fixture_Analysis_Selected_${n.getFullYear()}-${o(n.getMonth()+1)}-${o(n.getDate())}_${o(n.getHours())}.${o(n.getMinutes())}.pdf`,s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=i,document.body.appendChild(a),a.click(),a.remove(),setTimeout(()=>URL.revokeObjectURL(s),1e3)}api(t){return t}formatBytes(t){if(!t&&0!==t)return"";const n=1024;if(Math.abs(t)<n)return t+" B";const o=["KB","MB","GB","TB"];let i=-1;do{t/=n,++i}while(Math.abs(t)>=n&&i<o.length-1);return t.toFixed(t<10?1:0)+" "+o[i]}colorFor(t){if(!t)return"#228B22";const n=t.toLowerCase();return this.teamColorMap[n]||"#228B22"}colorForText(t){const n=this.colorFor(t);return this.mix("#000000",n,.3)}tint(t,n){return this.mix("#ffffff",t,n)}mix(t,n,o){const i=this.hexToRgb(t),s=this.hexToRgb(n),a=Math.max(0,Math.min(1,o));return`rgb(${Math.round(i.r+(s.r-i.r)*a)}, ${Math.round(i.g+(s.g-i.g)*a)}, ${Math.round(i.b+(s.b-i.b)*a)})`}hexToRgb(t){const n=t.replace("#",""),o=parseInt(3===n.length?n.split("").map(i=>i+i).join(""):n,16);return{r:o>>16&255,g:o>>8&255,b:255&o}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-analysis-pdfs"]],standalone:!0,features:[e.aNF],decls:30,vars:8,consts:[[1,"container"],[1,"hero","mb-4"],["title","All your generated PDFs, in one place",1,"badge"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["cx","12","cy","12","r","9"],["d","M8 12l2.5 2.5L16 9"],[1,"card"],[1,"card-header"],[2,"display","flex","align-items","center","gap","8px","flex-wrap","wrap"],["width","22","height","22","viewBox","0 0 24 24","fill","none","stroke","#19b562","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 7v5l3 3"],[2,"margin","0","font-size","18px","font-weight","800","color","#0b3b1f"],["type","button",1,"btn",3,"click","disabled"],["class","loader","aria-label","Loading",4,"ngIf"],["class","error",4,"ngIf"],["class","empty",4,"ngIf"],["class","overflow-auto",4,"ngIf"],["aria-label","Loading",1,"loader"],[1,"error"],[1,"empty"],[1,"overflow-auto"],[2,"width","36px","text-align","center"],["type","checkbox",3,"change","checked"],[2,"width","180px"],[2,"width","120px","text-align","right"],[4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"when"],[1,"fixture"],[1,"team-pill",3,"ngStyle"],[1,"vs"],[1,"filename",3,"title"],[1,"size"],[1,"actions"],["target","_blank","title","Open inline in a new tab","rel","noopener",1,"link-btn","view",3,"href"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 3h6v6"],["d","M10 14L21 3"],["d","M5 7v14h14"],["title","Download PDF",1,"link-btn","download",3,"href"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["d","M7 10l5 5 5-5"],["d","M12 15V3"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.qSk(),e.j41(3,"svg",3),e.nrm(4,"circle",4)(5,"path",5),e.k0s(),e.EFF(6," Fixture Analysis History "),e.k0s(),e.joV(),e.j41(7,"h1"),e.EFF(8,"Bring your match insights back anytime"),e.k0s(),e.j41(9,"p"),e.EFF(10,"All generated fixture analysis PDFs are archived here. View inline or download \u2014 football-themed and ready to share."),e.k0s()(),e.j41(11,"div",6)(12,"div",7)(13,"div",8),e.qSk(),e.j41(14,"svg",9),e.nrm(15,"circle",4)(16,"path",10),e.k0s(),e.joV(),e.j41(17,"h2",11),e.EFF(18,"Generated PDFs"),e.k0s()(),e.j41(19,"div",8)(20,"button",12),e.bIt("click",function(){return o.downloadAllOnPage()}),e.EFF(21,"Download all on page"),e.k0s(),e.j41(22,"button",12),e.bIt("click",function(){return o.downloadSelected()}),e.EFF(23,"Download selected"),e.k0s(),e.j41(24,"button",12),e.bIt("click",function(){return o.load()}),e.EFF(25),e.k0s()()(),e.DNE(26,u,1,0,"div",13)(27,_,2,1,"div",14)(28,b,2,0,"div",15)(29,k,18,2,"div",16),e.k0s()()),2&n&&(e.R7$(20),e.Y8G("disabled",o.loading||0===o.items.length),e.R7$(2),e.Y8G("disabled",o.loading||0===o.selectedIds.size),e.R7$(2),e.Y8G("disabled",o.loading),e.R7$(),e.JRh(o.loading?"Loading\u2026":"Refresh"),e.R7$(),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",o.error),e.R7$(),e.Y8G("ngIf",!o.loading&&0===o.items.length),e.R7$(),e.Y8G("ngIf",o.items.length))},dependencies:[c.MD,c.Sq,c.bT,c.B3,c.vh],styles:['[_nghost-%COMP%]{display:block}.container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:16px}.hero[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:14px;background:linear-gradient(135deg,#e8f7ee,#dff5ff);border:1px solid #bfe3cf;padding:18px}.hero[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;opacity:.12;pointer-events:none;background-image:repeating-linear-gradient(0deg,#7ad18f 0,#7ad18f 1px,transparent 1px,transparent 18px)}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 4px;font-size:22px;font-weight:800;color:#0b3b1f;letter-spacing:.3px}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#0f5132;font-size:13px}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-weight:600;font-size:12px;padding:4px 8px;border-radius:999px;color:#08341b;background:#d9fbe5;border:1px solid #b9efcc}.badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #dbe8df;border-radius:12px;padding:12px;box-shadow:0 1px 2px #0000000a}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}.btn[_ngcontent-%COMP%]{appearance:none;border:0;border-radius:10px;padding:8px 12px;cursor:pointer;font-weight:700;background:linear-gradient(180deg,#19b562,#0d8a46);color:#04110a;box-shadow:inset 0 1px #fff6,0 1px 2px #0000001a}.btn[disabled][_ngcontent-%COMP%]{filter:grayscale(1);opacity:.6;cursor:default}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#0b1220;color:#cfe0f4;text-align:left;padding:8px 10px;font-weight:700;font-size:12px;letter-spacing:.3px}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #e6f0ea;font-size:13px;color:#0b1723}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#fbfdfc}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eefbf3}.fixture[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.team-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;color:#052012;font-weight:700;border:1px solid rgba(0,0,0,.06)}.vs[_ngcontent-%COMP%]{font-weight:800;color:#0f5132}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.link-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;text-decoration:none;font-weight:700;padding:6px 10px;border-radius:10px}.view[_ngcontent-%COMP%]{background:#e6f0ff;color:#0f2d6a;border:1px solid #c7dcff}.download[_ngcontent-%COMP%]{background:#e8f8ef;color:#0f5132;border:1px solid #c3ecd2}.link-btn[_ngcontent-%COMP%]:hover{filter:saturate(1.2) brightness(1.03)}.when[_ngcontent-%COMP%]{white-space:nowrap;color:#0b3b1f;font-weight:600}.filename[_ngcontent-%COMP%]{color:#0b1723;max-width:520px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.size[_ngcontent-%COMP%]{text-align:right;font-variant-numeric:tabular-nums;color:#08341b;font-weight:600}.empty[_ngcontent-%COMP%]{color:#4b5563;font-size:13px;padding:6px 0}.error[_ngcontent-%COMP%]{color:#b91c1c;font-size:13px;margin:4px 0}.loader[_ngcontent-%COMP%]{height:6px;background:linear-gradient(90deg,#19b562,#0ea5e9,#19b562);background-size:200% 100%;animation:_ngcontent-%COMP%_slide 1.2s linear infinite;border-radius:999px}@keyframes _ngcontent-%COMP%_slide{to{background-position:200% 0}}']})}}return r})()}}]);