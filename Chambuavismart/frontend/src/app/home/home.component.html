
<!-- Flashscore-like dark layout with left sidebar and cards -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

<div class="fs-layout" role="main">
  <!-- Sidebar -->
  <aside class="fs-sidebar" [class.collapsed]="!sidebarOpen" aria-label="Primary Navigation" [attr.aria-hidden]="!sidebarOpen ? 'true' : 'false'">
    <div class="brand">ChambuVS</div>
    <ul class="nav-list" role="menu">
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Home'" routerLink="/" (click)="setActive('Home')" title="Home"><i class="fa fa-home"></i> Home</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Fixtures'" routerLink="/fixtures" (click)="setActive('Fixtures')" title="Fixtures"><i class="fa fa-calendar"></i> Fixtures</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Match Analysis'" routerLink="/match-analysis" (click)="setActive('Match Analysis')" title="Match Analysis"><i class="fa fa-chart-line"></i> Match Analysis</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Form Guide'" routerLink="/form-guide" (click)="setActive('Form Guide')" title="Form Guide"><i class="fa fa-stream"></i> Form Guide</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Quick Insights'" routerLink="/quick-insights" (click)="setActive('Quick Insights')" title="Quick Insights"><i class="fa fa-bolt"></i> Quick Insights</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Hot Picks Today'" routerLink="/hot-picks-today" (click)="setActive('Hot Picks Today')" title="Hot Picks Today"><i class="fa fa-fire"></i> Hot Picks Today</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='League Table'" routerLink="/league-table" (click)="setActive('League Table')" title="League Table"><i class="fa fa-table"></i> League Table</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Data Management'" routerLink="/data-management" (click)="setActive('Data Management')" title="Data Management"><i class="fa fa-database"></i> Data Management</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Team Search'" routerLink="/team-search" (click)="setActive('Team Search')" title="Team Search"><i class="fa fa-search"></i> Team Search</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Fixtures Analysis'" routerLink="/fixtures-analysis" (click)="setActive('Fixtures Analysis')" title="Fixtures Analysis"><i class="fa fa-chart-bar"></i> Fixtures Analysis</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Fixture Analysis History'" routerLink="/fixture-analysis-history" (click)="setActive('Fixture Analysis History')" title="Fixture Analysis History"><i class="fa fa-history"></i> Fixture Analysis History</li>
      <li class="nav-item" role="menuitem" [class.active]="activeNav==='Admin'" routerLink="/admin" (click)="setActive('Admin')" title="Admin"><i class="fa fa-user-shield"></i> Admin</li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="fs-main">
    <div class="fs-grid">
      <!-- Top card -->
      <section class="card">
        <div class="card-body topbar">
          <div>
            <div class="title">CHAMBUAVISMART</div>
            <a class="subtitle" routerLink="/fixture-analysis-history" title="View Match Analysis History">
              <i class="fa fa-info-circle"></i>
              View Match Analysis History
            </a>
          </div>
          <button class="btn btn-secondary sidebar-toggle" type="button" (click)="toggleSidebar()" [attr.aria-expanded]="sidebarOpen ? 'true' : 'false'" aria-label="Toggle navigation sidebar">
            <i class="fa fa-bars"></i>
            <span style="font-weight:600">Menu</span>
          </button>
        </div>
      </section>

      <!-- Fixtures grid card list -->
      <section class="card">
        <div class="card-body">
          <div class="section-head">
            <div class="section-title">Today's Fixtures</div>
            <div class="section-sub">{{ todayLabel }}</div>
            <div class="flex-spacer"></div>
            <div class="badge badge-blue" aria-live="polite">
              <ng-container *ngIf="todayLoading; else cntTpl">Loading…</ng-container>
              <ng-template #cntTpl>{{ todayCount }}</ng-template>
            </div>
          </div>

          <div *ngIf="!todayLoading && (!todayFixtures || todayFixtures.length === 0)" class="muted">No fixtures available for today. Please load fixtures to continue.</div>

          <div class="grid-2" *ngIf="!todayLoading && todayFixtures && todayFixtures.length">
            <div class="fixture-card" *ngFor="let item of todayFlatData; trackBy: trackByFixtureId" [attr.aria-label]="'Fixture: ' + (item.fixture.homeTeam || 'Unknown Home') + ' vs ' + (item.fixture.awayTeam || 'Unknown Away')" (click)="goToAnalysis({ leagueId: item.leagueId, leagueName: item.leagueName }, item.fixture)" tabindex="0" role="button">
              <div class="fixture-meta">{{ item.fixture.round }} — {{ item.fixture.formattedDate || (toSafeDate(item.fixture.dateTime) | date:'EEE, d MMM yyyy, hh:mm a z':'':'Africa/Nairobi') }}</div>
              <div class="fixture-league" title="{{ (item.leagueCountry || 'Unknown Country') + ' — ' + (item.leagueName || 'Unknown League') }}">
                <i class="fa fa-flag" aria-hidden="true"></i>
                <span class="text">{{ item.leagueCountry || 'Unknown Country' }} — {{ item.leagueName || 'Unknown League' }}</span>
              </div>
              <div class="fixture-teams" aria-label="Fixture teams">
                <span class="team home" [title]="item.fixture.homeTeam || 'Unknown Home'" [ngStyle]="teamPillStyle(item.fixture.homeTeam, item.leagueId)">{{ item.fixture.homeTeam || 'Unknown Home' }}</span>
                <span class="vs" aria-hidden="true">vs</span>
                <span class="team away" [title]="item.fixture.awayTeam || 'Unknown Away'" [ngStyle]="teamPillStyle(item.fixture.awayTeam, item.leagueId)">{{ item.fixture.awayTeam || 'Unknown Away' }}</span>
              </div>
              <div class="fixture-status">
                <span class="status" [class.upcoming]="computeStatus(item.fixture)==='UPCOMING'" [class.finished]="computeStatus(item.fixture)==='FINISHED'">{{ statusLabel(item.fixture) }}</span>
                <span class="leader" *ngIf="involvesLeader(item.fixture)">Leader Match Today</span>
              </div>
              <div class="fixture-actions">
                <a (click)="goToAnalysis({ leagueId: item.leagueId, leagueName: item.leagueName }, item.fixture); $event.stopPropagation();" class="link" href="javascript:void(0)">Details</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer: Why Choose -->
      <section class="card">
        <div class="card-body">
          <div class="section-title">Why Choose ChambuVS</div>
          <div class="grid-3">
            <div class="mini-card">
              <div class="mini-icon"><i class="fa fa-chart-line"></i></div>
              <div class="mini-title">Match Analysis</div>
              <div class="mini-desc">Deep, data-driven previews and confidence scoring for smarter decisions.</div>
              <a routerLink="/match-analysis" class="link">Learn More</a>
            </div>
            <div class="mini-card">
              <div class="mini-icon"><i class="fa fa-database"></i></div>
              <div class="mini-title">Data Management</div>
              <div class="mini-desc">Transparent uploads and league-level control over your data.</div>
              <a routerLink="/data-management" class="link">Learn More</a>
            </div>
            <div class="mini-card">
              <div class="mini-icon"><i class="fa fa-lightbulb"></i></div>
              <div class="mini-title">Advice</div>
              <div class="mini-desc">Actionable insights distilled from thousands of analyzed fixtures.</div>
              <a routerLink="/quick-insights" class="link">Learn More</a>
            </div>
          </div>
          <div class="stats-bar">
            <div class="stat" style="width:75%">75% Average Confidence</div>
          </div>
        </div>
      </section>

    </div>
  </main>
</div>
