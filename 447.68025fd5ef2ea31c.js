"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[447],{5447:(h,c,a)=>{a.r(c),a.d(c,{PrintTodayComponent:()=>m});var t=a(4438),r=a(177),l=a(9679),d=a(3928);function p(o,s){1&o&&(t.j41(0,"section",7),t.EFF(1,"Loading fixtures\u2026"),t.k0s())}function u(o,s){1&o&&(t.j41(0,"section",7),t.EFF(1,"No fixtures available for the selected date."),t.k0s())}function f(o,s){if(1&o&&(t.j41(0,"article",10)(1,"div",11),t.EFF(2),t.k0s(),t.j41(3,"div",12)(4,"div",13)(5,"span",14),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"span",15),t.EFF(9,"\u2022"),t.k0s(),t.j41(10,"span",16),t.EFF(11),t.k0s()(),t.j41(12,"div",17)(13,"span",18),t.EFF(14),t.k0s(),t.j41(15,"span",19),t.EFF(16,"vs"),t.k0s(),t.j41(17,"span",20),t.EFF(18),t.k0s()(),t.j41(19,"div",21)(20,"span",22),t.EFF(21),t.k0s(),t.j41(22,"span",15),t.EFF(23,"\u2022"),t.k0s(),t.j41(24,"span",23),t.EFF(25),t.k0s()()()()),2&o){const e=s.$implicit,n=s.index;t.R7$(2),t.JRh(n+1),t.R7$(4),t.JRh(t.brH(7,8,e.fixture.dateTime,"EEE, d MMM yyyy, HH:mm","Africa/Nairobi")),t.R7$(5),t.Lme("",e.leagueCountry||"\u2014"," \u2014 ",e.leagueName||"League",""),t.R7$(3),t.JRh(e.fixture.homeTeam),t.R7$(4),t.JRh(e.fixture.awayTeam),t.R7$(3),t.JRh(e.fixture.round),t.R7$(4),t.JRh(e.fixture.status)}}function g(o,s){if(1&o&&(t.j41(0,"section",8),t.DNE(1,f,26,12,"article",9),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.flatData())("ngForTrackBy",e.trackById)}}let m=(()=>{class o{constructor(){this.api=(0,t.WQX)(d.g),this.route=(0,t.WQX)(l.nX),this.loading=(0,t.vPA)(!0),this.data=(0,t.vPA)([]),this.selectedIso=(0,t.vPA)(this.computeNairobiDateIso(new Date)),this.trackById=(e,n)=>n.fixture.id,this.flatData=(0,t.EWP)(()=>{const e=[];for(const n of this.data())for(const i of n.fixtures||[])e.push({leagueId:n.leagueId,leagueName:n.leagueName,leagueCountry:n.leagueCountry,fixture:i});return e.sort((n,i)=>new Date(n.fixture.dateTime).getTime()-new Date(i.fixture.dateTime).getTime()),e}),this.route.queryParamMap.subscribe(e=>{const n=(e.get("date")||"").trim(),i=this.normalizeIsoOrDefault(n);i!==this.selectedIso()?(this.selectedIso.set(i),this.fetch()):0===this.data().length&&this.fetch()})}onPrint(){window.print()}fetch(){this.loading.set(!0);const e=this.selectedIso();this.api.getFixturesByDate(e).subscribe({next:n=>{this.data.set(n||[]),this.loading.set(!1)},error:()=>{this.data.set([]),this.loading.set(!1)}})}computeNairobiDateIso(e){return new Intl.DateTimeFormat("en-CA",{timeZone:"Africa/Nairobi",year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}normalizeIsoOrDefault(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)?e:this.computeNairobiDateIso(new Date)}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-print-today"]],standalone:!0,features:[t.aNF],decls:18,vars:5,consts:[[1,"print-layout"],[1,"print-header","no-print"],["routerLink","/",1,"btn"],[1,"btn",3,"click"],[1,"meta"],["class","muted",4,"ngIf"],["class","list",4,"ngIf"],[1,"muted"],[1,"list"],["class","fx pill",4,"ngFor","ngForOf","ngForTrackBy"],[1,"fx","pill"],["aria-hidden","true",1,"num"],[1,"content"],[1,"line1"],[1,"time"],[1,"sep"],[1,"lg"],["aria-label","Fixture teams",1,"tm"],[1,"home"],[1,"vs"],[1,"away"],[1,"line2"],[1,"round"],[1,"status"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"header",1)(2,"a",2),t.EFF(3,"\u2190 Back"),t.k0s(),t.j41(4,"h1"),t.EFF(5,"Printable Fixtures"),t.k0s(),t.j41(6,"button",3),t.bIt("click",function(){return i.onPrint()}),t.EFF(7,"Print"),t.k0s()(),t.j41(8,"section",4)(9,"div"),t.EFF(10,"Time zone: Africa/Nairobi"),t.k0s(),t.j41(11,"div"),t.EFF(12),t.k0s(),t.j41(13,"div"),t.EFF(14),t.k0s()(),t.DNE(15,p,2,0,"section",5)(16,u,2,0,"section",5)(17,g,2,2,"section",6),t.k0s()),2&n&&(t.R7$(12),t.SpI("Date: ",i.selectedIso(),""),t.R7$(2),t.SpI("Total fixtures: ",i.flatData().length,""),t.R7$(),t.Y8G("ngIf",i.loading()),t.R7$(),t.Y8G("ngIf",!i.loading()&&0===i.flatData().length),t.R7$(),t.Y8G("ngIf",!i.loading()&&i.flatData().length))},dependencies:[r.MD,r.Sq,r.bT,r.vh,l.Wk],styles:[".print-layout[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:16px;color:#e6eef8;background:#0b1220}.print-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:12px}.btn[_ngcontent-%COMP%]{background:#0f172a;color:#e6eef8;border:1px solid #334155;padding:6px 10px;border-radius:6px;text-decoration:none;cursor:pointer}.meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:14px;color:#9fb3cd;margin-bottom:10px}.muted[_ngcontent-%COMP%]{color:#9fb3cd}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.fx[_ngcontent-%COMP%]{display:grid;grid-template-columns:48px 1fr;gap:10px;padding:10px 14px;border:1px solid #1f2937;border-radius:9999px;background:#0f172a;align-items:center}.pill[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000040}.num[_ngcontent-%COMP%]{width:32px;height:32px;line-height:32px;border-radius:50%;background:#19b562;color:#04110a;font-weight:800;text-align:center;justify-self:center}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.line1[_ngcontent-%COMP%], .line2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#9fb3cd;font-size:14px}.time[_ngcontent-%COMP%]{color:#e6eef8;font-weight:600}.tm[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px}.vs[_ngcontent-%COMP%]{opacity:.8}.round[_ngcontent-%COMP%], .status[_ngcontent-%COMP%]{color:#9fb3cd}.sep[_ngcontent-%COMP%]{opacity:.6}@media print{.no-print[_ngcontent-%COMP%]{display:none!important}.print-layout[_ngcontent-%COMP%]{padding:0;background:#fff;color:#000}.fx[_ngcontent-%COMP%]{border:1px solid #000;background:#fff;box-shadow:none}.num[_ngcontent-%COMP%]{background:#000;color:#fff}}"]})}}return o})()}}]);