"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[896],{5896:(q,O,g)=>{g.r(O),g.d(O,{HotPicksTodayComponent:()=>A});var z=g(467),t=g(4438),x=g(177),S=g(9679),L=g(3928),B=g(5897);function U(d,C){1&d&&(t.j41(0,"div",9),t.EFF(1,"Loading today's fixtures\u2026"),t.k0s())}function W(d,C){1&d&&(t.j41(0,"div",9),t.EFF(1,"No hot picks found for today (based on current analysis colors)."),t.k0s())}function Y(d,C){if(1&d&&(t.j41(0,"div",10)(1,"div",11)(2,"span",12),t.nrm(3,"i",13),t.EFF(4),t.k0s(),t.j41(5,"span",14),t.EFF(6),t.k0s()(),t.j41(7,"div",15)(8,"span",16),t.EFF(9),t.k0s(),t.j41(10,"span",17),t.EFF(11,"vs"),t.k0s(),t.j41(12,"span",16),t.EFF(13),t.k0s()()()),2&d){const e=C.$implicit,o=t.XpG();t.R7$(4),t.Lme(" ",e.leagueCountry||"Unknown Country"," \u2014 ",e.leagueName||"Unknown League",""),t.R7$(2),t.JRh(e.fixture.formattedDate||""),t.R7$(2),t.Y8G("ngStyle",o.pillStyle(e.fixture.homeTeam,e.leagueId)),t.R7$(),t.JRh(e.fixture.homeTeam),t.R7$(3),t.Y8G("ngStyle",o.pillStyle(e.fixture.awayTeam,e.leagueId)),t.R7$(),t.JRh(e.fixture.awayTeam)}}let A=(()=>{class d{constructor(){this.api=(0,t.WQX)(L.g),this.cache=(0,t.WQX)(B.N),this.loading=!1,this.items=[],this.todayIso=""}ngOnInit(){this.todayIso=this.toIsoLocal(new Date),this.load()}load(){this.loading=!0,this.api.getFixturesByDate(this.todayIso).subscribe({next:e=>{const o=[],a="Africa/Nairobi";for(const n of e||[]){const r=n?.fixtures||[];for(const s of r){if(!s)continue;const l=this.normalizeTeamName(s,"home"),m=this.normalizeTeamName(s,"away");if(!l||!m||!this.isSameDayInTz(s.dateTime,a))continue;s.homeTeam=l,s.awayTeam=m;let i=null;try{const u=new Date(s.dateTime);isNaN(u.getTime())||(i=new Intl.DateTimeFormat("en-GB",{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:a,timeZoneName:"short"}).format(u))}catch{i=null}s.formattedDate=i,o.push({leagueId:n.leagueId,leagueName:n.leagueName,leagueCountry:n.leagueCountry,fixture:s})}}this.items=o.filter(n=>!(!n.fixture?.homeTeam||!n.fixture?.awayTeam)&&this.isHotPick(n.fixture.homeTeam,n.fixture.awayTeam,n.leagueId)),this.items.sort((n,r)=>this.toUtcMillis(n.fixture?.dateTime)-this.toUtcMillis(r.fixture?.dateTime));try{console.log("[HotPicks] Today",{total:o.length,picks:this.items.length,sample:this.items.slice(0,5).map(n=>({home:n.fixture.homeTeam,away:n.fixture.awayTeam,leagueId:n.leagueId,hColor:this.cache.getTeamColor(n.fixture.homeTeam,n.leagueId),aColor:this.cache.getTeamColor(n.fixture.awayTeam,n.leagueId)}))})}catch{}this.loading=!1},error:e=>{this.items=[],this.loading=!1}})}isHotPick(e,o,a){const n=this.cache.getTeamColor(e,a??void 0)||"",r=this.cache.getTeamColor(o,a??void 0)||"",s=this.colorCategory(n),l=this.colorCategory(r);return"green"===s&&"red"===l||"red"===s&&"green"===l}colorCategory(e){const o=(e||"").toLowerCase();return o?o.includes("#16a34a")||o.includes("16,160,16")||o.includes("#10a010")||o.includes("28a745")||o.includes("green")?"green":o.includes("#ef4444")||o.includes("204, 43, 59")||o.includes("cc2b3b")||o.includes("red")?"red":o.includes("#f59e0b")||o.includes("255, 165, 0")||o.includes("ffa500")||o.includes("orange")?"orange":"none":"none"}pillStyle(e,o){const a=this.cache.getTeamColor(e,o??void 0);return a?{background:a,color:"#fff",padding:"2px 6px",borderRadius:"6px"}:{}}toSafeDate(e){try{const o=new Date(e);return isNaN(o.getTime())?null:o}catch{return null}}toIsoLocal(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}toUtcMillis(e){if(!e)return NaN;const a=/[zZ]|[+-]\d{2}:\d{2}$/.test(e)?e:e+"Z",n=Date.parse(a);return isNaN(n)?new Date(e).getTime():n}getYMDInTz(e,o){const n=new Intl.DateTimeFormat("en-GB",{timeZone:o,year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e);return{y:Number(n.find(m=>"year"===m.type)?.value),m:Number(n.find(m=>"month"===m.type)?.value),d:Number(n.find(m=>"day"===m.type)?.value)}}isSameDayInTz(e,o){if(!e)return!1;const a=new Date(e);if(isNaN(a.getTime()))return!1;const n=this.getYMDInTz(new Date,o),r=this.getYMDInTz(a,o);return n.y===r.y&&n.m===r.m&&n.d===r.d}trackById(e,o){const a=o?.fixture;return a&&null!=a.id?a.id:`${a?.homeTeam}-${a?.awayTeam}-${a?.dateTime}-${e}`}downloadPdf(){return(0,z.A)(function*(){const e=document.querySelector("section.container");if(!e){try{window.print()}catch{}return}const o=a=>new Promise((n,r)=>{const s=document.createElement("script");s.src=a,s.async=!0,s.onload=()=>n(),s.onerror=()=>r(new Error("Failed to load "+a)),document.head.appendChild(s)});try{const a="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js",n="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js";window.html2canvas||(yield o(a)),window.jspdf||(yield o(n));const r=window.html2canvas,{jsPDF:s}=window.jspdf||{};if(!r||!s)throw new Error("PDF libs unavailable");e.classList.add("exporting");const l=yield r(e,{backgroundColor:"#0b1220",scale:2,useCORS:!0});e.classList.remove("exporting"),l.toDataURL("image/png");const i=new s({orientation:"p",unit:"pt",format:"a4"}),u=i.internal.pageSize.getWidth(),P=i.internal.pageSize.getHeight(),I=u,E=I/l.width,p=24;i.setFontSize(14),i.setTextColor(150,150,150),i.text("Powered by Chambuavismart",u-p,28,{align:"right"});const G=["1. Get today's Hot Picks in PDF form","2. Look at the odds assigned by the bookies.","3. If the odds favour the team we have assigned the green colour, then proceed and bet on this team to win.","3. If you are Risk-Averse, instead of picking a direct win, give the team double chance (Win or Draw).","4. NB. Placing multibets is risky. Consider placing multibets of very few teams if you prefer multibets over single bets.","5. Good luck from Chambuavismart team."],N=14,y=10,T=p,_=40,b=u-2*p,K=b-2*y;i.setFontSize(12);const v=[];for(const c of G){const f=i.splitTextToSize(c,K);v.push(...f)}const k=2*y+v.length*N;i.setFillColor(11,47,85),i.setDrawColor(18,62,115),i.roundedRect(T,_,b,k,8,8,"FD"),i.setTextColor(220,235,255);let j=_+y+12;for(const c of v)i.text(c,T+y,j),j+=N;const R=_+k+24;let M=l.height,H=0,w=0;for(;M>0;){const c=0===w?P-R:P,f=Math.max(0,Math.floor(c/E));if(f<=0)break;const h=document.createElement("canvas"),F=h.getContext("2d");if(h.width=l.width,h.height=f,!F)break;F.clearRect(0,0,h.width,h.height),F.drawImage(l,0,-H);const J=h.toDataURL("image/png");i.addImage(J,"PNG",0,0===w?R:0,I,0===w?c:P,void 0,"FAST"),M-=f,H+=f,w++,M>0&&(i.addPage(),i.setFontSize(14),i.setTextColor(150,150,150),i.text("Powered by Chambuavismart",u-p,28,{align:"right"}))}const Z=i.getNumberOfPages();for(let c=1;c<=Z;c++)i.setPage(c),i.setFontSize(14),i.setTextColor(150,150,150),i.text("Powered by Chambuavismart",u-p,28,{align:"right"}),1===c&&(i.setDrawColor(18,62,115),i.roundedRect(T,_,b,k,8,8));const D=new Date,$=c=>c<10?"0"+c:""+c,X=`Hot_Picks_Today_${D.getFullYear()}-${$(D.getMonth()+1)}-${$(D.getDate())}.pdf`;i.save(X)}catch(a){console.warn("[HotPicks] PDF generation failed, falling back to print()",a);try{window.print()}catch{}}})()}normalizeTeamName(e,o){if(!e)return"";const a="home"===o?["homeTeam","home_team","home","home_name","homeTeamName"]:["awayTeam","away_team","away","away_name","awayTeamName"];for(const r of a){const s=e[r];if("string"==typeof s&&s.trim())return s.trim()}const n="home"===o?e.home||e.home_team||e.teams?.home||e.teamHome:e.away||e.away_team||e.teams?.away||e.teamAway;if(n){if("string"==typeof n&&n.trim())return n.trim();if("string"==typeof n.name&&n.name.trim())return n.name.trim();if("string"==typeof n.team&&n.team.trim())return n.team.trim();if("string"==typeof n.title&&n.title.trim())return n.title.trim();if("string"==typeof n.shortName&&n.shortName.trim())return n.shortName.trim()}return""}static{this.\u0275fac=function(o){return new(o||d)}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["app-hot-picks-today"]],standalone:!0,features:[t.aNF],decls:15,vars:4,consts:[[1,"container"],[1,"header"],[1,"sub"],[1,"actions"],["title","Download this list as PDF",1,"btn",3,"click"],["routerLink","/","title","Back to Home",1,"btn","outline"],["class","muted",4,"ngIf"],[1,"list"],["class","fixture",4,"ngFor","ngForOf","ngForTrackBy"],[1,"muted"],[1,"fixture"],[1,"row1"],[1,"league"],[1,"fa","fa-flag"],[1,"dt"],[1,"row2"],[1,"team","name",3,"ngStyle"],[1,"vs"]],template:function(o,a){1&o&&(t.j41(0,"section",0)(1,"div",1)(2,"h1"),t.EFF(3,"Hot Picks Today"),t.k0s(),t.j41(4,"div",2),t.EFF(5,"Fixtures where one team has a strong green streak and the opponent has a strong red streak (as in Fixtures Analysis)."),t.k0s(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return a.downloadPdf()}),t.EFF(8,"Download as PDF"),t.k0s(),t.j41(9,"a",5),t.EFF(10,"Home"),t.k0s()()(),t.DNE(11,U,2,0,"div",6)(12,W,2,0,"div",6),t.j41(13,"div",7),t.DNE(14,Y,14,7,"div",8),t.k0s()()),2&o&&(t.R7$(11),t.Y8G("ngIf",a.loading),t.R7$(),t.Y8G("ngIf",!a.loading&&0===a.items.length),t.R7$(2),t.Y8G("ngForOf",a.items)("ngForTrackBy",a.trackById))},dependencies:[x.pM,x.bT,x.B3,S.Wk],styles:['[_nghost-%COMP%]{display:block;color:#e0e0e0;background:#0a0a0a;font-family:Inter,Roboto,Arial,sans-serif}.container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:16px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:800;color:#fff}.sub[_ngcontent-%COMP%]{color:#9aa0a6}.actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:8px}.btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:1px solid #1d4ed8;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700}.btn.outline[_ngcontent-%COMP%]{background:transparent;color:#9cc2ff;border-color:#123e73}.muted[_ngcontent-%COMP%]{color:#9aa0a6;margin-top:10px}.list[_ngcontent-%COMP%]{margin-top:14px;display:grid;grid-template-columns:1fr;gap:10px}.fixture[_ngcontent-%COMP%]{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:10px}.row1[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c9d1d9;font-size:12px}.row2[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:6px;font-weight:800}.team.name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vs[_ngcontent-%COMP%]{color:#9aa0a6}.row2[_ngcontent-%COMP%]   .vs[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1}.exporting[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]   .vs[_ngcontent-%COMP%]:after{content:"Powered by Chambuavismart";font-size:10px;color:#94a3b8;opacity:.65;margin-top:2px;letter-spacing:.2px}.exporting[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%], .exporting[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:none!important}.exporting[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-top:120px!important}@media print{body[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact;print-color-adjust:exact}.btn[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{display:none!important}.container[_ngcontent-%COMP%]{padding:0}.fixture[_ngcontent-%COMP%]{break-inside:avoid}}']})}}return d})()}}]);