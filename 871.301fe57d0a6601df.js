"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[871],{871:(ie,P,l)=>{l.r(P),l.d(P,{FormGuideComponent:()=>ne});var e=l(4438),_=l(177),h=l(9417),F=l(9679),b=l(3767),w=l(8731),k=l(1413),G=l(7673),I=l(6354),E=l(3294),f=l(8141),C=l(5558),R=l(9437),O=l(980);const v=(s,r,t)=>({win:s,draw:r,loss:t}),m=(s,r,t)=>({red:s,yellow:r,green:t});function j(s,r){if(1&s&&(e.j41(0,"option",7),e.EFF(1),e.k0s()),2&s){const t=r.$implicit;e.Y8G("ngValue",t.leagueId),e.R7$(),e.JRh(t.label)}}function $(s,r){if(1&s&&(e.j41(0,"optgroup",21),e.DNE(1,j,2,2,"option",9),e.k0s()),2&s){const t=r.$implicit;e.Y8G("label",t.groupLabel),e.R7$(),e.Y8G("ngForOf",t.options)}}function x(s,r){if(1&s&&(e.j41(0,"option",7),e.EFF(1),e.k0s()),2&s){const t=r.$implicit;e.Y8G("ngValue",t.id),e.R7$(),e.JRh(t.name)}}function M(s,r){1&s&&(e.j41(0,"div",22),e.EFF(1,"Loading..."),e.k0s())}function y(s,r){if(1&s&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.JRh(t.error)}}function T(s,r){if(1&s&&(e.j41(0,"div",51),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.JRh(t.weightedWarning)}}function S(s,r){1&s&&(e.j41(0,"span",52),e.EFF(1,"N/A"),e.k0s())}function N(s,r){if(1&s&&(e.j41(0,"span",62),e.EFF(1),e.k0s()),2&s){const t=r.$implicit,n=r.index,i=e.XpG().$implicit;e.Y8G("ngClass",e.sMw(3,v,"W"===t,"D"===t,"L"===t))("title",i.lastResultsDetails&&i.lastResultsDetails[n]?i.lastResultsDetails[n]:"W"===t?"Win":"D"===t?"Draw":"L"===t?"Loss":""),e.R7$(),e.JRh(t)}}function D(s,r){1&s&&(e.qex(0),e.j41(1,"span",63),e.EFF(2,"+"),e.k0s(),e.bVm())}function A(s,r){if(1&s&&(e.qex(0),e.j41(1,"span",64),e.EFF(2),e.k0s(),e.j41(3,"div",65),e.nrm(4,"div",66),e.k0s(),e.bVm()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.AVh("red",t.bttsPct<40)("yellow",t.bttsPct>=40&&t.bttsPct<70)("green",t.bttsPct>=70),e.Y8G("title",n.weightTip),e.R7$(),e.SpI("",t.bttsPct,"%"),e.R7$(2),e.xc7("width",t.bttsPct+"%"),e.Y8G("ngClass",e.sMw(11,m,t.bttsPct<40,t.bttsPct>=40&&t.bttsPct<70,t.bttsPct>=70))}}function Y(s,r){if(1&s&&(e.qex(0),e.j41(1,"span",64),e.EFF(2),e.k0s(),e.j41(3,"div",65),e.nrm(4,"div",66),e.k0s(),e.bVm()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.AVh("red",t.over15Pct<40)("yellow",t.over15Pct>=40&&t.over15Pct<70)("green",t.over15Pct>=70),e.Y8G("title",n.weightTip),e.R7$(),e.SpI("",t.over15Pct,"%"),e.R7$(2),e.xc7("width",t.over15Pct+"%"),e.Y8G("ngClass",e.sMw(11,m,t.over15Pct<40,t.over15Pct>=40&&t.over15Pct<70,t.over15Pct>=70))}}function B(s,r){if(1&s&&(e.qex(0),e.j41(1,"span",64),e.EFF(2),e.k0s(),e.j41(3,"div",65),e.nrm(4,"div",66),e.k0s(),e.bVm()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.AVh("red",t.over25Pct<40)("yellow",t.over25Pct>=40&&t.over25Pct<70)("green",t.over25Pct>=70),e.Y8G("title",n.weightTip),e.R7$(),e.SpI("",t.over25Pct,"%"),e.R7$(2),e.xc7("width",t.over25Pct+"%"),e.Y8G("ngClass",e.sMw(11,m,t.over25Pct<40,t.over25Pct>=40&&t.over25Pct<70,t.over25Pct>=70))}}function L(s,r){if(1&s&&(e.qex(0),e.j41(1,"span",64),e.EFF(2),e.k0s(),e.j41(3,"div",65),e.nrm(4,"div",66),e.k0s(),e.bVm()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.AVh("red",t.over35Pct<40)("yellow",t.over35Pct>=40&&t.over35Pct<70)("green",t.over35Pct>=70),e.Y8G("title",n.weightTip),e.R7$(),e.SpI("",t.over35Pct,"%"),e.R7$(2),e.xc7("width",t.over35Pct+"%"),e.Y8G("ngClass",e.sMw(11,m,t.over35Pct<40,t.over35Pct>=40&&t.over35Pct<70,t.over35Pct>=70))}}function V(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeBTTSPercent","weightedAwayBTTSPercent","bttsPct").homeRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeBTTSPercent","weightedAwayBTTSPercent","bttsPct").home," ")}}function X(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeBTTSPercent","weightedAwayBTTSPercent","bttsPct").awayRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeBTTSPercent","weightedAwayBTTSPercent","bttsPct").away," ")}}function H(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeOver15Percent","weightedAwayOver15Percent","over15Pct").homeRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeOver15Percent","weightedAwayOver15Percent","over15Pct").home," ")}}function W(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeOver15Percent","weightedAwayOver15Percent","over15Pct").awayRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeOver15Percent","weightedAwayOver15Percent","over15Pct").away," ")}}function U(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeOver25Percent","weightedAwayOver25Percent","over25Pct").homeRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeOver25Percent","weightedAwayOver25Percent","over25Pct").home," ")}}function J(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeOver25Percent","weightedAwayOver25Percent","over25Pct").awayRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeOver25Percent","weightedAwayOver25Percent","over25Pct").away," ")}}function K(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeOver35Percent","weightedAwayOver35Percent","over35Pct").homeRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeOver35Percent","weightedAwayOver35Percent","over35Pct").home," ")}}function z(s,r){if(1&s&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.xc7("background",n.percentBg(n.splitPercent(t,"weightedHomeOver35Percent","weightedAwayOver35Percent","over35Pct").awayRaw)),e.Y8G("title",n.weightTip),e.R7$(),e.SpI(" ",n.splitPercent(t,"weightedHomeOver35Percent","weightedAwayOver35Percent","over35Pct").away," ")}}function Q(s,r){if(1&s&&(e.j41(0,"tr")(1,"td")(2,"div",53)(3,"span",54),e.EFF(4,"\u{1f3df}\ufe0f"),e.k0s(),e.j41(5,"span"),e.EFF(6),e.k0s()()(),e.j41(7,"td",55),e.EFF(8),e.k0s(),e.j41(9,"td",55),e.EFF(10),e.k0s(),e.j41(11,"td",55),e.EFF(12),e.k0s(),e.j41(13,"td",55),e.EFF(14),e.k0s(),e.j41(15,"td",55),e.EFF(16),e.k0s(),e.j41(17,"td",55),e.EFF(18),e.k0s(),e.j41(19,"td",55),e.EFF(20),e.k0s(),e.j41(21,"td",55),e.EFF(22),e.k0s(),e.j41(23,"td",44),e.EFF(24),e.k0s(),e.j41(25,"td",55),e.DNE(26,N,2,7,"span",56)(27,D,3,0,"ng-container",57),e.k0s(),e.j41(28,"td",58),e.DNE(29,A,5,15,"ng-container",59),e.k0s(),e.j41(30,"td",58),e.DNE(31,Y,5,15,"ng-container",59),e.k0s(),e.j41(32,"td",58),e.DNE(33,B,5,15,"ng-container",59),e.k0s(),e.j41(34,"td",58),e.DNE(35,L,5,15,"ng-container",59),e.k0s(),e.j41(36,"td",55)(37,"span",60),e.EFF(38),e.k0s(),e.EFF(39," / "),e.j41(40,"span",22),e.EFF(41),e.k0s()(),e.j41(42,"td",55),e.DNE(43,V,2,4,"span",61),e.EFF(44," / "),e.DNE(45,X,2,4,"span",61),e.k0s(),e.j41(46,"td",55),e.DNE(47,H,2,4,"span",61),e.EFF(48," / "),e.DNE(49,W,2,4,"span",61),e.k0s(),e.j41(50,"td",55),e.DNE(51,U,2,4,"span",61),e.EFF(52," / "),e.DNE(53,J,2,4,"span",61),e.k0s(),e.j41(54,"td",55),e.DNE(55,K,2,4,"span",61),e.EFF(56," / "),e.DNE(57,z,2,4,"span",61),e.k0s()()),2&s){const t=r.$implicit;e.XpG();const n=e.sdS(71),i=e.XpG();e.R7$(6),e.JRh(t.teamName),e.R7$(2),e.JRh(i.matchesPlayed(t)),e.R7$(2),e.JRh(t.w),e.R7$(2),e.JRh(t.d),e.R7$(2),e.JRh(t.l),e.R7$(2),e.JRh(t.gf),e.R7$(2),e.JRh(t.ga),e.R7$(2),e.JRh(t.gd),e.R7$(2),e.JRh(t.pts),e.R7$(),e.Y8G("title",i.weightTip),e.R7$(),e.JRh(i.safePpg(t)),e.R7$(2),e.Y8G("ngForOf",i.displayResults(t)),e.R7$(),e.Y8G("ngIf",i.hasMore(t)),e.R7$(2),e.Y8G("ngIf",i.isNumber(t.bttsPct))("ngIfElse",n),e.R7$(2),e.Y8G("ngIf",i.isNumber(t.over15Pct))("ngIfElse",n),e.R7$(2),e.Y8G("ngIf",i.isNumber(t.over25Pct))("ngIfElse",n),e.R7$(2),e.Y8G("ngIf",i.isNumber(t.over35Pct))("ngIfElse",n),e.R7$(3),e.JRh(i.splitPpg(t).home),e.R7$(3),e.JRh(i.splitPpg(t).away),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeBTTSPercent","weightedAwayBTTSPercent","bttsPct").home)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeBTTSPercent","weightedAwayBTTSPercent","bttsPct").away)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeOver15Percent","weightedAwayOver15Percent","over15Pct").home)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeOver15Percent","weightedAwayOver15Percent","over15Pct").away)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeOver25Percent","weightedAwayOver25Percent","over25Pct").home)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeOver25Percent","weightedAwayOver25Percent","over25Pct").away)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeOver35Percent","weightedAwayOver35Percent","over35Pct").home)("ngIfElse",n),e.R7$(2),e.Y8G("ngIf","N/A"!==i.splitPercent(t,"weightedHomeOver35Percent","weightedAwayOver35Percent","over35Pct").away)("ngIfElse",n)}}function q(s,r){if(1&s){const t=e.RV6();e.j41(0,"div",24)(1,"div",25),e.EFF(2),e.k0s(),e.DNE(3,T,2,1,"div",26),e.j41(4,"div",27)(5,"table",28)(6,"thead",29)(7,"tr",30)(8,"th",31),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("teamName"))}),e.EFF(9),e.k0s(),e.j41(10,"th",32),e.EFF(11,"Results"),e.k0s(),e.j41(12,"th",33),e.EFF(13,"Form & Trends"),e.k0s(),e.j41(14,"th",33),e.EFF(15,"Home / Away Splits"),e.k0s()(),e.j41(16,"tr")(17,"th",34),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("mp"))}),e.EFF(18),e.k0s(),e.j41(19,"th",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("w"))}),e.EFF(20),e.k0s(),e.j41(21,"th",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("d"))}),e.EFF(22),e.k0s(),e.j41(23,"th",37),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("l"))}),e.EFF(24),e.k0s(),e.j41(25,"th",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("gf"))}),e.EFF(26),e.k0s(),e.j41(27,"th",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("ga"))}),e.EFF(28),e.k0s(),e.j41(29,"th",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("gd"))}),e.EFF(30),e.k0s(),e.j41(31,"th",41),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("pts"))}),e.EFF(32),e.k0s(),e.j41(33,"th",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("ppg"))}),e.EFF(34,"Weighted PPG "),e.j41(35,"span",43),e.EFF(36,"\u2696"),e.k0s(),e.EFF(37),e.k0s(),e.j41(38,"th",44),e.EFF(39),e.k0s(),e.j41(40,"th",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("bttsPct"))}),e.EFF(41,"BTTS % "),e.j41(42,"span",43),e.EFF(43,"\u2696"),e.k0s(),e.EFF(44),e.k0s(),e.j41(45,"th",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("over15Pct"))}),e.EFF(46,"O1.5% "),e.j41(47,"span",43),e.EFF(48,"\u2696"),e.k0s(),e.EFF(49),e.k0s(),e.j41(50,"th",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("over25Pct"))}),e.EFF(51,"O2.5% "),e.j41(52,"span",43),e.EFF(53,"\u2696"),e.k0s(),e.EFF(54),e.k0s(),e.j41(55,"th",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSort("over35Pct"))}),e.EFF(56,"O3.5% "),e.j41(57,"span",43),e.EFF(58,"\u2696"),e.k0s(),e.EFF(59),e.k0s(),e.j41(60,"th",45),e.EFF(61,"PPG (Home / Away)"),e.k0s(),e.j41(62,"th",46),e.EFF(63,"BTTS% H/A"),e.k0s(),e.j41(64,"th",47),e.EFF(65,"O1.5% H/A"),e.k0s(),e.j41(66,"th",48),e.EFF(67,"O2.5% H/A"),e.k0s(),e.j41(68,"th",49),e.EFF(69,"O3.5% H/A"),e.k0s()()(),e.DNE(70,S,2,0,"ng-template",null,0,e.C5r),e.j41(72,"tbody"),e.DNE(73,Q,58,39,"tr",50),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(2),e.Lme(" Form Guide \u2013 ",t.headerLeagueName()," (",t.headerSeasonName(),") "),e.R7$(),e.Y8G("ngIf",t.weightedWarning),e.R7$(6),e.SpI("Team ",t.sortIcon("teamName"),""),e.R7$(9),e.SpI("MP ",t.sortIcon("mp"),""),e.R7$(2),e.SpI("W ",t.sortIcon("w"),""),e.R7$(2),e.SpI("D ",t.sortIcon("d"),""),e.R7$(2),e.SpI("L ",t.sortIcon("l"),""),e.R7$(2),e.SpI("GF ",t.sortIcon("gf"),""),e.R7$(2),e.SpI("GA ",t.sortIcon("ga"),""),e.R7$(2),e.SpI("GD ",t.sortIcon("gd"),""),e.R7$(2),e.SpI("Pts ",t.sortIcon("pts"),""),e.R7$(),e.Y8G("title",t.weightTip),e.R7$(2),e.Y8G("title",t.weightTip),e.R7$(2),e.SpI(" ",t.sortIcon("ppg"),""),e.R7$(),e.Y8G("title","Last results ("+t.lastHeader()+")"),e.R7$(),e.JRh(t.lastHeader()),e.R7$(),e.Y8G("title","Weighted BTTS % \u2014 "+t.weightTip),e.R7$(2),e.Y8G("title",t.weightTip),e.R7$(2),e.SpI(" ",t.sortIcon("bttsPct"),""),e.R7$(),e.Y8G("title","Weighted Over 1.5% \u2014 "+t.weightTip),e.R7$(2),e.Y8G("title",t.weightTip),e.R7$(2),e.SpI(" ",t.sortIcon("over15Pct"),""),e.R7$(),e.Y8G("title","Weighted Over 2.5% \u2014 "+t.weightTip),e.R7$(2),e.Y8G("title",t.weightTip),e.R7$(2),e.SpI(" ",t.sortIcon("over25Pct"),""),e.R7$(),e.Y8G("title","Weighted Over 3.5% \u2014 "+t.weightTip),e.R7$(2),e.Y8G("title",t.weightTip),e.R7$(2),e.SpI(" ",t.sortIcon("over35Pct"),""),e.R7$(14),e.Y8G("ngForOf",t.sortedRows)}}function Z(s,r){if(1&s&&(e.j41(0,"span",77),e.EFF(1),e.k0s()),2&s){const t=r.$implicit,n=r.index,i=e.XpG().$implicit;e.Y8G("ngClass",e.sMw(3,v,"W"===t,"D"===t,"L"===t))("title",i.lastResultsDetails&&i.lastResultsDetails[n]?i.lastResultsDetails[n]:""),e.R7$(),e.JRh(t)}}function ee(s,r){if(1&s&&(e.j41(0,"div",69)(1,"details")(2,"summary")(3,"div",70)(4,"div",71),e.EFF(5),e.k0s(),e.j41(6,"div",72),e.DNE(7,Z,2,7,"span",73),e.k0s(),e.j41(8,"div",74),e.EFF(9),e.k0s()()(),e.j41(10,"div",75)(11,"div",76)(12,"span"),e.EFF(13,"MP"),e.k0s(),e.j41(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"div",76)(17,"span"),e.EFF(18,"W-D-L"),e.k0s(),e.j41(19,"span"),e.EFF(20),e.k0s()(),e.j41(21,"div",76)(22,"span"),e.EFF(23,"GF/GA"),e.k0s(),e.j41(24,"span"),e.EFF(25),e.k0s()(),e.j41(26,"div",76)(27,"span"),e.EFF(28,"Pts"),e.k0s(),e.j41(29,"span"),e.EFF(30),e.k0s()(),e.j41(31,"div",76)(32,"span"),e.EFF(33,"BTTS%"),e.k0s(),e.j41(34,"span"),e.EFF(35),e.k0s()(),e.j41(36,"div",76)(37,"span"),e.EFF(38,"O1.5/O2.5/O3.5"),e.k0s(),e.j41(39,"span"),e.EFF(40),e.k0s()(),e.j41(41,"div",76)(42,"span"),e.EFF(43,"PPG (H/A)"),e.k0s(),e.j41(44,"span"),e.EFF(45),e.k0s()()()()()),2&s){const t=r.$implicit,n=e.XpG(2);e.R7$(5),e.JRh(t.teamName),e.R7$(2),e.Y8G("ngForOf",n.displayResults(t)),e.R7$(2),e.SpI("PPG: ",n.safePpg(t),""),e.R7$(6),e.JRh(n.matchesPlayed(t)),e.R7$(5),e.E5c("",t.w,"-",t.d,"-",t.l,""),e.R7$(5),e.E5c("",t.gf,"/",t.ga," (GD ",t.gd,")"),e.R7$(5),e.JRh(t.pts),e.R7$(5),e.SpI("",t.bttsPct,"%"),e.R7$(5),e.E5c("",t.over15Pct,"% / ",t.over25Pct,"% / ",t.over35Pct,"%"),e.R7$(5),e.Lme("",n.splitPpg(t).home," / ",n.splitPpg(t).away,"")}}function te(s,r){if(1&s&&(e.j41(0,"div",67),e.DNE(1,ee,46,17,"div",68),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.sortedRows)}}let ne=(()=>{class s{constructor(){this.weightTip="Weighted metrics use recency-weighting and home/away context. Percentages are normalized to 0\u2013100.",this.api=(0,e.WQX)(b.N),this.seasonApi=(0,e.WQX)(w.z),this.router=(0,e.WQX)(F.Ix),this.route=(0,e.WQX)(F.nX),this.leagues=[],this.groupedLeagues=[],this.optionById={},this.leagueId=null,this.limit="all",this.scope="overall",this.userSetLimit=!1,this.rows=[],this.seasons=[],this.seasonId=null,this.sortedRows=[],this.sortCol="ppg",this.sortDir="desc",this.loading=!1,this.error=null,this.weightedWarning=null,this.loadParams$=new k.B,this.api.getGroupedLeaguesForUpload().subscribe({next:t=>{this.groupedLeagues=t||[],this.optionById={};for(const n of this.groupedLeagues)for(const i of n.options||[])i&&"number"==typeof i.leagueId&&(this.optionById[i.leagueId]={leagueName:n.leagueName,country:n.country,season:i.season})},error:t=>this.error="Failed to load leagues"}),this.route.queryParamMap.subscribe(t=>{const n=t.get("leagueId"),i=t.get("seasonId"),o=n?Number(n):this.leagueId,c=null!==i?Number(i):this.seasonId,a=o!==this.leagueId,p=c!==this.seasonId;this.leagueId=o,this.seasonId=c,this.leagueId&&(a?this.onLeagueChange(this.leagueId):p&&null!=this.seasonId&&this.onSeasonChange(this.seasonId))})}load(){this.leagueId&&null!=this.seasonId&&(this.loading=!0,this.error=null,this.weightedWarning=null,this.loadParams$.next({leagueId:this.leagueId,seasonId:this.seasonId,limit:this.limit,scope:this.scope}))}ngOnInit(){this.loadParams$.pipe((0,I.T)(t=>({...t,key:`${t.leagueId}|${t.seasonId}|${t.limit}|${t.scope}`})),(0,E.F)((t,n)=>t.key===n.key),(0,f.M)(t=>console.debug("[FormGuide] load trigger",t)),(0,C.n)(t=>this.api.getFormGuide(t.leagueId,t.seasonId,t.limit,t.scope).pipe((0,f.M)(n=>console.debug("[FormGuide] response",{count:n?.length??0,params:t})),(0,R.W)(n=>(this.error=400===n?.status?"No data available for this season yet":"Failed to load form guide",(0,G.of)([]))),(0,O.j)(()=>{this.loading=!1})))).subscribe(t=>{t&&t.length>=0&&(this.rows=t,this.evaluateWeightedFields(t),this.applySort())})}onLeagueChange(t){this.leagueId=t,this.userSetLimit=!1,this.seasonId=null,this.seasons=[],this.leagueId&&this.seasonApi.listSeasons(this.leagueId).subscribe({next:n=>{this.seasons=n??[];const i=(new Date).toISOString().slice(0,10),o=this.seasons.find(u=>(!u.startDate||u.startDate<=i)&&(!u.endDate||u.endDate>=i));o&&(this.seasons=[o,...this.seasons.filter(u=>u.id!==o.id)]),this.seasonId=o?o.id:this.seasons[0]?.id??null;const c=this.route.snapshot.queryParamMap,a=c.get("leagueId"),p=c.get("seasonId"),d=String(this.leagueId),g=null!=this.seasonId?String(this.seasonId):null;(a!==d||p!==g)&&this.router.navigate([],{queryParams:{leagueId:this.leagueId,seasonId:this.seasonId},queryParamsHandling:"merge",replaceUrl:!0}),this.load()},error:n=>{this.seasons=[],this.error=null,this.load()}})}onLimitChange(t){this.limit=t,this.userSetLimit=!0,this.leagueId&&this.load()}setScope(t){this.scope!==t&&(this.scope=t,this.leagueId&&this.load())}onSeasonChange(t){this.seasonId=t;const n=this.route.snapshot.queryParamMap,i=n.get("leagueId"),o=n.get("seasonId"),c=null!=this.leagueId?String(this.leagueId):null,a=null!=this.seasonId?String(this.seasonId):null;(i!==c||o!==a)&&this.router.navigate([],{queryParams:{leagueId:this.leagueId,seasonId:this.seasonId},queryParamsHandling:"merge",replaceUrl:!0}),this.leagueId&&this.load()}onSort(t){this.sortCol===t?this.sortDir="asc"===this.sortDir?"desc":"asc":(this.sortCol=t,this.sortDir="teamName"===t?"asc":"desc"),this.applySort()}sortIcon(t){return this.sortCol!==t?"":"asc"===this.sortDir?"\u25b2":"\u25bc"}evaluateWeightedFields(t){const n=t.some(i=>!(this.isNumber(i.ppg)&&this.isNumber(i.bttsPct)&&this.isNumber(i.over15Pct)&&this.isNumber(i.over25Pct)&&this.isNumber(i.over35Pct)));this.weightedWarning=n?"Some weighted statistics are unavailable for this selection. Showing N/A where data is missing.":null}pickSplitNumber(t,n,i,o,c="home"){const a=t.weightedHomeMatches??0,p=t.weightedAwayMatches??0;return"home"===c?this.isNumber(n)&&a>0?n:this.isNumber(o)?o:NaN:this.isNumber(i)&&p>0?i:this.isNumber(o)?o:NaN}splitPpg(t){const n=this.pickSplitNumber(t,t.weightedHomePPG,t.weightedAwayPPG,t.ppg,"home"),i=this.pickSplitNumber(t,t.weightedHomePPG,t.weightedAwayPPG,t.ppg,"away");return{home:this.isNumber(n)?n.toFixed(2):"N/A",away:this.isNumber(i)?i.toFixed(2):"N/A"}}splitPercent(t,n,i,o){const c=t[n],a=t[i],p=t[o],d=this.pickSplitNumber(t,c,a,p,"home"),g=this.pickSplitNumber(t,c,a,p,"away");return{home:this.isNumber(d)?`${d}%`:"N/A",away:this.isNumber(g)?`${g}%`:"N/A",homeRaw:this.isNumber(d)?d:-1,awayRaw:this.isNumber(g)?g:-1}}applySort(){const t=this.sortCol,n="asc"===this.sortDir?1:-1,i=o=>{switch(t){case"teamName":return(o.teamName||"").toLowerCase();case"mp":return this.matchesPlayed(o);case"w":return o.w;case"d":return o.d;case"l":return o.l;case"gf":return o.gf;case"ga":return o.ga;case"gd":return o.gd;case"pts":return o.pts;case"ppg":return this.numVal(o.ppg);case"bttsPct":return this.numVal(o.bttsPct);case"over15Pct":return this.numVal(o.over15Pct);case"over25Pct":return this.numVal(o.over25Pct);case"over35Pct":return this.numVal(o.over35Pct);default:return 0}};this.sortedRows=(this.rows||[]).slice().sort((o,c)=>{const a=i(o),p=i(c);return a<p?-1*n:a>p?1*n:o.pts!==c.pts?c.pts-o.pts:o.gd!==c.gd?c.gd-o.gd:o.gf!==c.gf?c.gf-o.gf:o.teamName.localeCompare(c.teamName)})}displayResults(t){const n=t.lastResults||[];if("all"===this.limit)return n.slice(0,10);const i=n.slice(0,this.limit);for(;i.length<this.limit;)i.push("\u2022");return i}hasMore(t){return"all"===this.limit?(t.lastResults?.length||0)>10:(t.lastResults?.length||0)>("number"==typeof this.limit?this.limit:0)}matchesPlayed(t){const n=t?.totalMp??(t?.w||0)+(t?.d||0)+(t?.l||0);return"all"!==this.limit&&this.userSetLimit?t?.mp??n:n}lastHeader(){return"all"===this.limit?"Last 10":`Last ${this.limit}`}percentBg(t){return t>=70?"#19b56244":t>=40?"#facc1544":"#ef444444"}isNumber(t){return"number"==typeof t&&!isNaN(t)}safePpg(t){return this.isNumber(t.ppg)?t.ppg.toFixed(2):"N/A"}numVal(t){return this.isNumber(t)?t:Number.NEGATIVE_INFINITY}headerLeagueName(){const t=this.leagues.find(i=>i.id===this.leagueId);if(t)return`${t.name}`;const n=null!=this.leagueId?this.optionById[this.leagueId]:null;return n?`${n.leagueName}`:""}headerSeasonName(){return this.seasons.find(n=>n.id===this.seasonId)?.name||"Season"}exportCsv(){const n=[["Team","MP","W","D","L","GF","GA","GD","Pts","PPG","Last","BTTS%","Over1.5%","Over2.5%","Over3.5%","PPG_H","PPG_A"].join(",")];for(const a of this.sortedRows){const p=(a.lastResults||[]).slice(0,"all"===this.limit?10:this.limit).join(""),d=this.splitPpg(a),g=[this.csvVal(a.teamName),this.csvVal(String(this.matchesPlayed(a))),this.csvVal(String(a.w)),this.csvVal(String(a.d)),this.csvVal(String(a.l)),this.csvVal(String(a.gf)),this.csvVal(String(a.ga)),this.csvVal(String(a.gd)),this.csvVal(String(a.pts)),this.csvVal(this.safePpg(a)),this.csvVal(p),this.csvVal(this.isNumber(a.bttsPct)?String(a.bttsPct):""),this.csvVal(this.isNumber(a.over15Pct)?String(a.over15Pct):""),this.csvVal(this.isNumber(a.over25Pct)?String(a.over25Pct):""),this.csvVal(this.isNumber(a.over35Pct)?String(a.over35Pct):""),this.csvVal(String(d.home)),this.csvVal(String(d.away))];n.push(g.join(","))}const i=new Blob([n.join("\n")],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=`form_guide_${this.headerLeagueName()}_${this.headerSeasonName()}.csv`,c.click(),URL.revokeObjectURL(o)}csvVal(t){const n=String(t??""),i=n.includes(",")||n.includes('"')||n.includes("\n"),o=n.replace(/"/g,'""');return i?`"${o}"`:o}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-form-guide"]],standalone:!0,features:[e.aNF],decls:45,vars:21,consts:[["naTpl",""],[1,"theme-container"],[1,"page-title"],[1,"panel","toolbar"],[1,"filters"],[1,"label"],[1,"select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"label",4,"ngFor","ngForOf"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"scope-tabs"],[1,"tabs"],[1,"tab",3,"click"],[1,"actions"],["title","Number of matches considered for form and weighted metrics",1,"label"],["title","Choose how many recent matches to include",1,"select",3,"ngModelChange","ngModel"],["title","Download table as CSV",1,"btn",3,"click"],["class","muted",4,"ngIf"],["class","banner",4,"ngIf"],["class","panel data-panel",4,"ngIf"],["class","panel mobile-list",4,"ngIf"],[3,"label"],[1,"muted"],[1,"banner"],[1,"panel","data-panel"],[1,"panel-header"],["class","banner warning",4,"ngIf"],[1,"table-scroll"],[1,"table","rounded-table"],[1,"sticky"],[1,"group-header"],["rowspan","2",1,"sortable","left",3,"click"],["colspan","8",1,"center"],["colspan","5",1,"center"],["title","MP = Matches Played (completed)",1,"center","sortable",3,"click"],["title","W = Wins",1,"center","sortable",3,"click"],["title","D = Draws",1,"center","sortable",3,"click"],["title","L = Losses",1,"center","sortable",3,"click"],["title","GF = Goals For",1,"center","sortable",3,"click"],["title","GA = Goals Against",1,"center","sortable",3,"click"],["title","GD = Goal Difference",1,"center","sortable",3,"click"],["title","Pts = Points",1,"center","sortable",3,"click"],[1,"center","sortable",3,"click","title"],[1,"weighted",3,"title"],[1,"center",3,"title"],["title","PPG (Home / Away)",1,"center"],["title","BTTS% (Home / Away)",1,"center"],["title","Over 1.5% (Home / Away)",1,"center"],["title","Over 2.5% (Home / Away)",1,"center"],["title","Over 3.5% (Home / Away)",1,"center"],[4,"ngFor","ngForOf"],[1,"banner","warning"],[1,"muted-na"],[1,"team"],[1,"badge"],[1,"center"],["class","pill pill-lg","aria-hidden","true",3,"ngClass","title",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"center","stat"],[4,"ngIf","ngIfElse"],[1,"ha-ppg"],["class","percent",3,"background","title",4,"ngIf","ngIfElse"],["aria-hidden","true",1,"pill","pill-lg",3,"ngClass","title"],["title","More results",1,"pill"],[1,"percent",3,"title"],[1,"mini-bar"],[1,"fill",3,"ngClass"],[1,"panel","mobile-list"],["class","mobile-card",4,"ngFor","ngForOf"],[1,"mobile-card"],[1,"mobile-header"],[1,"name"],[1,"form"],["class","pill pill-lg",3,"ngClass","title",4,"ngFor","ngForOf"],[1,"ppg"],[1,"mobile-body"],[1,"row"],[1,"pill","pill-lg",3,"ngClass","title"]],template:function(n,i){1&n&&(e.j41(0,"div",1)(1,"h1",2),e.EFF(2,"Form Guide"),e.k0s(),e.j41(3,"div",3)(4,"div",4)(5,"label",5),e.EFF(6,"League"),e.k0s(),e.j41(7,"select",6),e.bIt("ngModelChange",function(c){return i.onLeagueChange(c)}),e.j41(8,"option",7),e.EFF(9,"-- Choose a league --"),e.k0s(),e.DNE(10,$,2,2,"optgroup",8),e.k0s(),e.j41(11,"label",5),e.EFF(12,"Season"),e.k0s(),e.j41(13,"select",6),e.bIt("ngModelChange",function(c){return i.onSeasonChange(c)}),e.DNE(14,x,2,2,"option",9),e.k0s(),e.j41(15,"div",10)(16,"span",5),e.EFF(17,"Scope"),e.k0s(),e.j41(18,"div",11)(19,"button",12),e.bIt("click",function(){return i.setScope("overall")}),e.EFF(20,"Overall"),e.k0s(),e.j41(21,"button",12),e.bIt("click",function(){return i.setScope("home")}),e.EFF(22,"Home"),e.k0s(),e.j41(23,"button",12),e.bIt("click",function(){return i.setScope("away")}),e.EFF(24,"Away"),e.k0s()()()(),e.j41(25,"div",13)(26,"label",14),e.EFF(27,"Matches Limit"),e.k0s(),e.j41(28,"select",15),e.bIt("ngModelChange",function(c){return i.onLimitChange(c)}),e.j41(29,"option",7),e.EFF(30,"3"),e.k0s(),e.j41(31,"option",7),e.EFF(32,"5"),e.k0s(),e.j41(33,"option",7),e.EFF(34,"6"),e.k0s(),e.j41(35,"option",7),e.EFF(36,"10"),e.k0s(),e.j41(37,"option",7),e.EFF(38,"Entire League"),e.k0s()(),e.j41(39,"button",16),e.bIt("click",function(){return i.exportCsv()}),e.EFF(40,"Export CSV"),e.k0s()()(),e.DNE(41,M,2,0,"div",17)(42,y,2,1,"div",18)(43,q,74,30,"div",19)(44,te,2,1,"div",20),e.k0s()),2&n&&(e.R7$(7),e.Y8G("ngModel",i.leagueId),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",i.groupedLeagues),e.R7$(3),e.Y8G("ngModel",i.seasonId),e.R7$(),e.Y8G("ngForOf",i.seasons),e.R7$(5),e.AVh("active","overall"===i.scope),e.R7$(2),e.AVh("active","home"===i.scope),e.R7$(2),e.AVh("active","away"===i.scope),e.R7$(5),e.Y8G("ngModel",i.limit),e.R7$(),e.Y8G("ngValue",3),e.R7$(2),e.Y8G("ngValue",5),e.R7$(2),e.Y8G("ngValue",6),e.R7$(2),e.Y8G("ngValue",10),e.R7$(2),e.Y8G("ngValue","all"),e.R7$(4),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",i.error),e.R7$(),e.Y8G("ngIf",!i.loading&&(null==i.rows?null:i.rows.length)),e.R7$(),e.Y8G("ngIf",!i.loading&&(null==i.rows?null:i.rows.length)))},dependencies:[_.MD,_.YU,_.Sq,_.bT,h.YN,h.xH,h.y7,h.wz,h.BC,h.vS],styles:["[_nghost-%COMP%]{display:block;height:100vh}.theme-container[_ngcontent-%COMP%]{height:100%;max-width:100%;padding:8px 12px}.page-title[_ngcontent-%COMP%]{margin:4px 0 8px}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.filters[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.btn[_ngcontent-%COMP%]{padding:6px 12px;border-radius:8px;border:1px solid #1f2937;background:#0f172a;color:#cfe0f4;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background:#111827}.data-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;flex:1 1 auto;min-height:0}.panel-header[_ngcontent-%COMP%]{font-weight:700;margin-bottom:4px;color:#9fb3cd}.table-scroll[_ngcontent-%COMP%]{flex:1 1 auto;min-height:0;overflow:auto}.rounded-table[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.table[_ngcontent-%COMP%]{font-size:12px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#ffffff05}.sticky[_ngcontent-%COMP%]{position:sticky;top:0;background:#0b1220;z-index:1}.group-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#0b1220}.team[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.badge[_ngcontent-%COMP%]{font-size:16px}.pill[_ngcontent-%COMP%]{display:inline-block;width:18px;height:18px;line-height:18px;text-align:center;margin:0 1px;border-radius:4px;font-weight:700;color:#04110a}.pill-lg[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;font-size:12px}.pill.win[_ngcontent-%COMP%]{background:#19b562}.pill.draw[_ngcontent-%COMP%]{background:#facc15}.pill.loss[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.tabs[_ngcontent-%COMP%]{display:flex;gap:6px}.tab[_ngcontent-%COMP%]{padding:6px 10px;border-radius:8px;border:1px solid #1f2937;background:#0f172a;color:#cfe0f4;cursor:pointer}.tab.active[_ngcontent-%COMP%]{background:#19b562;color:#04110a;border-color:#19b562}.percent[_ngcontent-%COMP%]{display:inline-block;padding:2px 6px;border-radius:6px;color:#04110a;font-weight:700;background:#eee}.percent.red[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.percent.yellow[_ngcontent-%COMP%]{background:#facc15;color:#04110a}.percent.green[_ngcontent-%COMP%]{background:#19b562;color:#04110a}.mini-bar[_ngcontent-%COMP%]{width:70px;height:6px;background:#1f2937;border-radius:4px;margin:4px auto 0;overflow:hidden}.mini-bar[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{height:100%}.mini-bar[_ngcontent-%COMP%]   .fill.red[_ngcontent-%COMP%]{background:#ef4444}.mini-bar[_ngcontent-%COMP%]   .fill.yellow[_ngcontent-%COMP%]{background:#facc15}.mini-bar[_ngcontent-%COMP%]   .fill.green[_ngcontent-%COMP%]{background:#19b562}.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.banner.warning[_ngcontent-%COMP%]{background:#facc1533;color:#d97706;border:1px solid #d97706;padding:6px 10px;border-radius:8px;margin-bottom:4px}.muted-na[_ngcontent-%COMP%]{color:#9fb3cd;font-style:italic}.ha-ppg[_ngcontent-%COMP%]{font-weight:700}.weighted[_ngcontent-%COMP%]{color:#6b7280;font-size:12px;margin-left:6px}.muted[_ngcontent-%COMP%]{color:#9fb3cd}.mobile-list[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]{border:1px solid #1f2937;border-radius:10px;padding:10px;margin-bottom:10px;background:#0f172a}.mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;justify-content:space-between}.mobile-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.mobile-header[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{flex:1;margin:0 8px;white-space:nowrap;overflow:hidden}.mobile-header[_ngcontent-%COMP%]   .ppg[_ngcontent-%COMP%]{color:#9fb3cd}.mobile-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px dashed #1f2937}.mobile-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{border-bottom:none}.theme-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.panel.toolbar[_ngcontent-%COMP%]{flex:0 0 auto}@media (max-width: 800px){.table[_ngcontent-%COMP%]{display:none}.mobile-list[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]{height:auto}.theme-container[_ngcontent-%COMP%]{height:auto}}@media (min-width: 801px){.mobile-list[_ngcontent-%COMP%]{display:none}}"]})}}return s})()}}]);